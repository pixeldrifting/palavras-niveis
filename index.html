<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Palavras - Níveis</title>

  <link rel="manifest" href="./manifest.json">
  <link rel="stylesheet" href="./styles.css">
  <meta name="theme-color" content="#2b2b2b" />
</head>
<body>

  <main class="container">

    <h1>Palavras — Níveis</h1>

    <section class="input-row">
      <input 
        id="wordInput" 
        type="text" 
        placeholder="Digite a palavra" 
        maxlength="100"
        autocomplete="off"
      />
      <button id="addBtn">ADD</button>
    </section>

    <div class="scroll-wrap">
      <section id="list" class="list"></section>
    </div>

    <div class="pagination">
      <button id="prevPage" class="pg-btn">&lt;</button>
      <span id="pageInfo">1 / 1</span>
      <button id="nextPage" class="pg-btn">&gt;</button>
    </div>
  </main>

  <script src="./app.js" defer></script>

  <!-- ⚡ Service Worker atualizado -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', async () => {
        try {
          const reg = await navigator.serviceWorker.register('./service-worker.js', {
            updateViaCache: 'none'
          });

          // Se já existir um SW esperando, ativa imediatamente
          if (reg.waiting) {
            reg.waiting.postMessage({ type: 'SKIP_WAITING_AND_RELOAD' });
          }

          // Checa atualização
          reg.update();

          // Quando o novo SW assumir controle → recarrega automaticamente
          navigator.serviceWorker.addEventListener('controllerchange', () => {
            window.location.reload();
          });

        } catch (err) {
          console.warn('SW registration failed:', err);
        }
      });
    }
  </script>

</body>
</html>
